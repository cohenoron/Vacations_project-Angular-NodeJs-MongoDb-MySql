{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport Cookies from 'js-cookie';\nimport axios from 'axios';\nlet VacationsComponent = class VacationsComponent {\n  constructor(http, stateService) {\n    this.http = http;\n    this.stateService = stateService;\n  }\n  ngOnInit() {\n    // this.http.get('http://localhost:8080/vacations').subscribe((data) => {\n    //   this.vacations = data;\n    // });\n    this.stateService.getVacation();\n    this.stateService.currentVacations.subscribe(value => {\n      this.vacations = value;\n    });\n    this.stateService.currentModeUser.subscribe(value => {\n      this.modeUser = value;\n    });\n    this.stateService.currentModeAdmin.subscribe(value => {\n      this.modeAdmin = value;\n    });\n    this.stateService.currentShowRegisterModal.subscribe(value => {\n      this.showRegisterModal = value;\n    });\n    this.stateService.currentShowLoginModal.subscribe(value => {\n      this.showLoginModal = value;\n    });\n    this.stateService.currentShowNewVacationModal.subscribe(value => {\n      this.showNewVacationModal = value;\n    });\n    this.stateService.currentShowVacationUpdate.subscribe(value => {\n      this.showVacationUpdate = value;\n    });\n    this.stateService.currentShowVacationDelete.subscribe(value => {\n      this.showVacationDelete = value;\n    });\n    this.stateService.currentNameOfUser.subscribe(value => {\n      this.nameOfUser = value;\n    });\n    this.stateService.currentCheckBox.subscribe(value => {\n      this.checkBox = value;\n    });\n    this.stateService.checkLogin();\n  }\n  loggin() {\n    this.stateService.changeShowLoginModal(true);\n    this.stateService.changeModeUser(false);\n    this.stateService.changeModeAdmin(false);\n    Cookies.remove('token');\n  }\n  logout() {\n    this.stateService.changeShowLoginModal(true);\n    this.stateService.changeModeUser(false);\n    this.stateService.changeModeAdmin(false);\n    Cookies.remove('token');\n  }\n  addNewVacation() {\n    this.stateService.changeShowLoginModal(false);\n    this.stateService.changeModeUser(false);\n    this.stateService.changeShowNewVacationModal(true);\n  }\n  handleUpdateEvent(vacation) {\n    this.selectedVacation = vacation;\n    this.stateService.changeShowVacationUpdate(true);\n  }\n  handleDeleteEvent(vacation) {\n    this.selectedVacation = vacation;\n    this.stateService.changeShowVacationDelete(true);\n  }\n  handleCheck(vacation) {\n    this.selectedVacation = vacation;\n    const jwt = Cookies.get('token');\n    axios.patch(`http://localhost:8080/fav/${vacation.id}`, {\n      withCredentials: true,\n      headers: {\n        authorization: `Bearer ${jwt}`\n      }\n    }).then(response => {\n      const data = response.data;\n      if (data.length && Array.isArray(data)) {\n        const checkBoxIds = data.map(item => item.vacation_id).filter(Number).map(Number);\n        console.log('cbox from handle');\n        console.log(checkBoxIds);\n        this.stateService.changeCheckBox(checkBoxIds);\n      }\n      this.stateService.checkFav();\n    }).catch(function (error) {\n      alert(error);\n    });\n  }\n};\nVacationsComponent = __decorate([Component({\n  selector: 'app-vacations',\n  templateUrl: './vacations.component.html',\n  styleUrls: ['./vacations.component.css']\n})], VacationsComponent);\nexport { VacationsComponent };","map":{"version":3,"mappings":"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","names":["Component","Cookies","axios","VacationsComponent","constructor","http","stateService","ngOnInit","getVacation","currentVacations","subscribe","value","vacations","currentModeUser","modeUser","currentModeAdmin","modeAdmin","currentShowRegisterModal","showRegisterModal","currentShowLoginModal","showLoginModal","currentShowNewVacationModal","showNewVacationModal","currentShowVacationUpdate","showVacationUpdate","currentShowVacationDelete","showVacationDelete","currentNameOfUser","nameOfUser","currentCheckBox","checkBox","checkLogin","loggin","changeShowLoginModal","changeModeUser","changeModeAdmin","remove","logout","addNewVacation","changeShowNewVacationModal","handleUpdateEvent","vacation","selectedVacation","changeShowVacationUpdate","handleDeleteEvent","changeShowVacationDelete","handleCheck","jwt","get","patch","id","withCredentials","headers","authorization","then","response","data","length","Array","isArray","checkBoxIds","map","item","vacation_id","filter","Number","console","log","changeCheckBox","checkFav","catch","error","alert","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["D:\\workSpace\\angular\\myapp\\src\\app\\vacations\\vacations.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { StateService } from '../service/shared.service';\nimport Cookies from 'js-cookie';\nimport axios from 'axios';\n\n@Component({\n  selector: 'app-vacations',\n  templateUrl: './vacations.component.html',\n  styleUrls: ['./vacations.component.css'],\n})\nexport class VacationsComponent implements OnInit {\n  vacations: any;\n  showRegisterModal: any | undefined;\n  showLoginModal: any | undefined;\n  showNewVacationModal: any | undefined;\n  nameOfUser: any | undefined;\n  modeUser: any | undefined;\n  modeAdmin: any | undefined;\n  showVacationUpdate: boolean | undefined;\n  selectedVacation: any;\n  showVacationDelete: any;\n  checkBox: number[] | undefined;\n\n  constructor(private http: HttpClient,public stateService: StateService) {}\n\n  ngOnInit() {\n    // this.http.get('http://localhost:8080/vacations').subscribe((data) => {\n    //   this.vacations = data;\n    // });\n\n    \n    this.stateService.getVacation();\n    this.stateService.currentVacations.subscribe((value) => {\n      this.vacations = value;\n    });\n    this.stateService.currentModeUser.subscribe((value) => {\n      this.modeUser = value;\n    });\n    this.stateService.currentModeAdmin.subscribe((value) => {\n      this.modeAdmin = value;\n    });\n\n    this.stateService.currentShowRegisterModal.subscribe((value) => {\n      this.showRegisterModal = value;\n    });\n    this.stateService.currentShowLoginModal.subscribe((value) => {\n      this.showLoginModal = value;\n    });\n    this.stateService.currentShowNewVacationModal.subscribe((value) => {\n      this.showNewVacationModal = value;\n    });\n    this.stateService.currentShowVacationUpdate.subscribe((value) => {\n      this.showVacationUpdate = value;\n    });\n    this.stateService.currentShowVacationDelete.subscribe((value) => {\n      this.showVacationDelete = value;\n    });\n    this.stateService.currentNameOfUser.subscribe((value) => {\n      this.nameOfUser = value;\n    });\n    this.stateService.currentCheckBox.subscribe((value) => {\n      this.checkBox = value;\n    });\n\n    this.stateService.checkLogin();\n  }\n\n  loggin() {\n    this.stateService.changeShowLoginModal(true);\n    this.stateService.changeModeUser(false);\n    this.stateService.changeModeAdmin(false);\n    Cookies.remove('token');\n  }\n\n  logout() {\n    this.stateService.changeShowLoginModal(true);\n    this.stateService.changeModeUser(false);\n    this.stateService.changeModeAdmin(false);\n    Cookies.remove('token');\n  }\n\n  addNewVacation() {\n    this.stateService.changeShowLoginModal(false);\n    this.stateService.changeModeUser(false);\n    this.stateService.changeShowNewVacationModal(true);\n  }\n\n  handleUpdateEvent(vacation: any) {\n    this.selectedVacation = vacation;\n    this.stateService.changeShowVacationUpdate(true);\n  }\n  handleDeleteEvent(vacation: any) {\n    this.selectedVacation = vacation;\n    this.stateService.changeShowVacationDelete(true);\n  }\n  handleCheck(vacation: any) {\n    this.selectedVacation = vacation;\n    const jwt = Cookies.get('token');\n    axios\n      .patch(`http://localhost:8080/fav/${vacation.id}`, {\n        withCredentials: true,\n        headers: { authorization: `Bearer ${jwt}` },\n      })\n      .then((response) => {\n        const data = response.data;\n        if (data.length && Array.isArray(data)) {\n          const checkBoxIds = data\n            .map((item: { vacation_id: any }) => item.vacation_id)\n            .filter(Number)\n            .map(Number);\n\n          console.log('cbox from handle');\n          console.log(checkBoxIds);\n          this.stateService.changeCheckBox(checkBoxIds);\n        }\n        this.stateService.checkFav();\n      })\n      .catch(function (error) {\n        alert(error);\n      });\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}